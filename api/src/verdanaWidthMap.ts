/**
 * Map of characters to their corresponding width values in the Verdana font.
 * 기준은 font-size: 100px 입니다.
 *
 * - [0]: normal
 * - [1]: bold
 * - [2]: italic
 * - [3]: bold italic
 *
 * @see https://github.com/adambisek/string-pixel-width
 */
export const verdanaWidthMap: Record<string, [number, number, number, number]> = {
	'0': [64, 71, 64, 71],
	'1': [64, 71, 64, 71],
	'2': [64, 71, 64, 71],
	'3': [64, 71, 64, 71],
	'4': [64, 71, 64, 71],
	'5': [64, 71, 64, 71],
	'6': [64, 71, 64, 71],
	'7': [64, 71, 64, 71],
	'8': [64, 71, 64, 71],
	'9': [64, 71, 64, 71],
	' ': [35, 34, 35, 34],
	'!': [39, 40, 39, 40],
	'"': [46, 59, 46, 59],
	'#': [82, 87, 82, 87],
	$: [64, 71, 64, 71],
	'%': [108, 127, 108, 127],
	'&': [73, 86, 73, 86],
	"'": [27, 33, 27, 33],
	'(': [45, 54, 45, 54],
	')': [45, 54, 45, 54],
	'*': [64, 71, 64, 71],
	'+': [82, 87, 82, 87],
	',': [36, 36, 36, 36],
	'-': [45, 48, 45, 48],
	'.': [36, 36, 36, 36],
	'/': [45, 69, 45, 69],
	':': [45, 40, 45, 40],
	';': [45, 40, 45, 40],
	'<': [82, 87, 82, 87],
	'=': [82, 87, 82, 87],
	'>': [82, 87, 82, 87],
	'?': [55, 62, 55, 62],
	'@': [100, 96, 100, 96],
	A: [68, 78, 68, 78],
	B: [69, 76, 69, 76],
	C: [70, 72, 70, 72],
	D: [77, 83, 77, 83],
	E: [63, 68, 63, 68],
	F: [57, 65, 57, 65],
	G: [78, 81, 78, 81],
	H: [75, 84, 75, 84],
	I: [42, 55, 42, 55],
	J: [45, 56, 45, 56],
	K: [69, 77, 69, 77],
	L: [56, 64, 56, 64],
	M: [84, 95, 84, 95],
	N: [75, 85, 75, 85],
	O: [79, 85, 79, 85],
	P: [60, 73, 60, 73],
	Q: [79, 85, 79, 85],
	R: [70, 78, 70, 78],
	S: [68, 71, 68, 71],
	T: [62, 68, 62, 68],
	U: [73, 81, 73, 81],
	V: [68, 76, 68, 76],
	W: [99, 113, 99, 113],
	X: [69, 76, 69, 76],
	Y: [62, 74, 62, 74],
	Z: [69, 69, 69, 69],
	'[': [45, 54, 45, 54],
	'\\': [45, 69, 45, 69],
	']': [45, 54, 45, 54],
	'^': [82, 87, 82, 87],
	_: [64, 71, 64, 71],
	'`': [64, 71, 64, 71],
	a: [60, 67, 60, 67],
	b: [62, 70, 62, 70],
	c: [52, 59, 52, 59],
	d: [62, 70, 62, 70],
	e: [60, 66, 60, 66],
	f: [35, 42, 35, 42],
	g: [62, 70, 62, 70],
	h: [63, 71, 63, 71],
	i: [27, 34, 27, 34],
	j: [34, 40, 34, 40],
	k: [59, 67, 59, 67],
	l: [27, 34, 27, 34],
	m: [97, 106, 97, 106],
	n: [63, 71, 63, 71],
	o: [61, 69, 61, 69],
	p: [62, 70, 62, 70],
	q: [62, 70, 62, 70],
	r: [43, 50, 43, 50],
	s: [52, 59, 52, 59],
	t: [39, 46, 39, 46],
	u: [63, 71, 63, 71],
	v: [59, 65, 59, 65],
	w: [82, 98, 82, 98],
	x: [59, 67, 59, 67],
	y: [59, 65, 59, 65],
	z: [53, 60, 53, 60],
	'{': [63, 71, 63, 71],
	'|': [45, 54, 45, 54],
	'}': [63, 71, 63, 71],
	'~': [82, 87, 82, 87],
};

export const getStringWidth = ({
	size = 12,
	str,
	style = 'normal',
}: {
	str: string;
	size?: number;
	style?: 'normal' | 'bold' | 'italic' | 'bold_italic';
}) => {
	let width = 0;
	const styleIndex = style === 'bold' ? 1 : style === 'italic' ? 2 : style === 'bold_italic' ? 3 : 0;

	str.split('').forEach((char) => {
		width += (verdanaWidthMap[char]?.[styleIndex] ?? 64) * (size / 100);
	});

	return width;
};
